!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.barba=t()}(this,(function(){var e=function(){function e(){}return e.prototype.then=function(n,r){var o=new e,i=this.s;if(i){var a=1&i?n:r;if(a){try{t(o,1,a(this.v))}catch(e){t(o,2,e)}return o}return this}return this.o=function(e){try{var i=e.v;1&e.s?t(o,1,n?n(i):i):r?t(o,1,r(i)):t(o,2,i)}catch(e){t(o,2,e)}},o},e}();function t(n,r,o){if(!n.s){if(o instanceof e){if(!o.s)return void(o.o=t.bind(null,n,r));1&r&&(r=o.s),o=o.v}if(o&&o.then)return void o.then(t.bind(null,n,r),t.bind(null,n,2));n.s=r,n.v=o;var i=n.o;i&&i(n)}}function n(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}var r={};!function(){function n(e){this.t=e,this.i=null,this.u=null,this.h=null,this.l=null}function o(e){return{value:e,done:!0}}function i(e){return{value:e,done:!1}}n.prototype[Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator"))]=function(){return this},n.prototype.p=function(t){return this.u(t&&t.then?t.then(i):i(t)),this.i=new e},n.prototype.next=function(n){var i=this;return i.l=new Promise((function(a){var s=i.i;if(null===s){var c=i.t;if(null===c)return a(i.l);function u(e){i.u(e&&e.then?e.then(o):o(e)),i.i=null,i.u=null}i.t=null,i.u=a,c(i).then(u,(function(t){if(t===r)u(i.h);else{var n=new e;i.u(n),i.i=null,i.u=null,_resolve(n,2,t)}}))}else i.i=null,i.u=a,t(s,1,n)}))},n.prototype.return=function(e){var n=this;return n.l=new Promise((function(i){var a=n.i;if(null===a)return null===n.t?i(n.l):(n.t=null,i(e&&e.then?e.then(o):o(e)));n.h=e,n.u=i,n.i=null,t(a,2,r)}))},n.prototype.throw=function(e){var n=this;return n.l=new Promise((function(r,o){var i=n.i;if(null===i)return null===n.t?r(n.l):(n.t=null,o(e));n.u=r,n.i=null,t(i,2,e)}))}}();var o,i,a=(function(e){var t=e.exports=function(e,t){return t=t||function(){},function(){var n=!1,r=arguments,o=new Promise((function(t,o){var i,a=e.apply({async:function(){return n=!0,function(e,n){e?o(e):t(n)}}},Array.prototype.slice.call(r));n||(!(i=a)||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then?t(a):a.then(t,o))}));return o.then(t.bind(null,null),t),o}};t.cb=function(e,n){return t((function(){var t=Array.prototype.slice.call(arguments);return t.length===e.length-1&&t.push(this.async()),e.apply(this,t)}),n)}}(o={exports:{}}),o.exports);!function(e){e[e.off=0]="off",e[e.error=1]="error",e[e.warning=2]="warning",e[e.info=3]="info",e[e.debug=4]="debug"}(i||(i={}));var s=i.off,c=function(e){this.m=e};c.getLevel=function(){return s},c.setLevel=function(e){return s=i[e]},c.prototype.error=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];this.P(console.error,i.error,e)},c.prototype.warn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];this.P(console.warn,i.warning,e)},c.prototype.info=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];this.P(console.info,i.info,e)},c.prototype.debug=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];this.P(console.log,i.debug,e)},c.prototype.P=function(e,t,n){t<=c.getLevel()&&e.apply(console,["["+this.m+"] "].concat(n))};var u=function(){this.logger=new c("@barba/core"),this.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeAppear","appear","afterAppear","appearCanceled","before","beforeLeave","leave","afterLeave","leaveCanceled","beforeEnter","enter","afterEnter","enterCanceled","after"],this.registered=new Map,this.init()};u.prototype.init=function(){var e=this;this.registered.clear(),this.all.forEach((function(t){e[t]||(e[t]=function(n,r){void 0===r&&(r=null),e.registered.has(t)||e.registered.set(t,new Set),e.registered.get(t).add({ctx:r,fn:n})})}))},u.prototype.do=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(this.registered.has(e)){var r=Promise.resolve();return this.registered.get(e).forEach((function(e){var n=e.ctx?e.fn.bind(e.ctx):e.fn;r=r.then((function(){return a(n).apply(void 0,t)}))})),r}return Promise.resolve()},u.prototype.clear=function(){var e=this;this.all.forEach((function(t){delete e[t]})),this.init()},u.prototype.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var e=[];this.registered.forEach((function(t,n){return e.push(n)})),this.logger.info("Registered hooks: "+e.join(","))};var l=new u,h=function e(t,n,r){return t instanceof RegExp?function(e,t){if(!t)return e;var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}(t,n):Array.isArray(t)?function(t,n,r){for(var o=[],i=0;i<t.length;i++)o.push(e(t[i],n,r).source);return new RegExp("(?:"+o.join("|")+")",b(r))}(t,n,r):function(e,t,n){return P(g(e,n),t,n)}(t,n,r)},p=g,d=w,f=P,m=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function g(e,t){for(var n,r=[],o=0,i=0,a="",s=t&&t.delimiter||"/",c=t&&t.whitelist||void 0,u=!1;null!==(n=m.exec(e));){var l=n[0],h=n[1],p=n.index;if(a+=e.slice(i,p),i=p+l.length,h)a+=h[1],u=!0;else{var d="",f=n[2],g=n[3],w=n[4],b=n[5];if(!u&&a.length){var P=a.length-1,x=a[P];(!c||c.indexOf(x)>-1)&&(d=x,a=a.slice(0,P))}a&&(r.push(a),a="",u=!1);var j=g||w,E=d||s;r.push({name:f||o++,prefix:d,delimiter:E,optional:"?"===b||"*"===b,repeat:"+"===b||"*"===b,pattern:j?y(j):"[^"+v(E===s?E:E+s)+"]+?"})}}return(a||i<e.length)&&r.push(a+e.substr(i)),r}function w(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var o="",i=r&&r.encode||encodeURIComponent,a=0;a<e.length;a++){var s=e[a];if("string"!=typeof s){var c,u=n?n[s.name]:void 0;if(Array.isArray(u)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but got array');if(0===u.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var l=0;l<u.length;l++){if(c=i(u[l],s),!t[a].test(c))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'"');o+=(0===l?s.prefix:s.delimiter)+c}}else if("string"!=typeof u&&"number"!=typeof u&&"boolean"!=typeof u){if(!s.optional)throw new TypeError('Expected "'+s.name+'" to be '+(s.repeat?"an array":"a string"))}else{if(c=i(String(u),s),!t[a].test(c))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+c+'"');o+=s.prefix+c}}else o+=s}return o}}function v(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function y(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function b(e){return e&&e.sensitive?"":"i"}function P(e,t,n){for(var r=(n=n||{}).strict,o=!1!==n.start,i=!1!==n.end,a=n.delimiter||"/",s=[].concat(n.endsWith||[]).map(v).concat("$").join("|"),c=o?"^":"",u=0;u<e.length;u++){var l=e[u];if("string"==typeof l)c+=v(l);else{var h=l.repeat?"(?:"+l.pattern+")(?:"+v(l.delimiter)+"(?:"+l.pattern+"))*":l.pattern;t&&t.push(l),c+=l.optional?l.prefix?"(?:"+v(l.prefix)+"("+h+"))?":"("+h+")?":v(l.prefix)+"("+h+")"}}if(i)r||(c+="(?:"+v(a)+")?"),c+="$"===s?"$":"(?="+s+")";else{var p=e[e.length-1],d="string"==typeof p?p[p.length-1]===a:void 0===p;r||(c+="(?:"+v(a)+"(?="+s+"))?"),d||(c+="(?="+v(a)+"|"+s+")")}return new RegExp(c,b(n))}h.parse=p,h.compile=function(e,t){return w(g(e,t))},h.tokensToFunction=d,h.tokensToRegExp=f;var x={container:"container",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},j=function(){this.g=x,this.A=new DOMParser};j.prototype.toString=function(e){return e.outerHTML},j.prototype.toDocument=function(e){return this.A.parseFromString(e,"text/html")},j.prototype.toElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t},j.prototype.getHtml=function(e){return void 0===e&&(e=document),this.toString(e.documentElement)},j.prototype.getWrapper=function(e){return void 0===e&&(e=document),e.querySelector("["+this.g.prefix+'="'+this.g.wrapper+'"]')},j.prototype.getContainer=function(e){return void 0===e&&(e=document),e.querySelector("["+this.g.prefix+'="'+this.g.container+'"]')},j.prototype.getNamespace=function(e){void 0===e&&(e=document);var t=e.querySelector("["+this.g.prefix+"-"+this.g.namespace+"]");return t?t.getAttribute(this.g.prefix+"-"+this.g.namespace):null},j.prototype.getHref=function(e){if(e.tagName&&"a"===e.tagName.toLowerCase()){var t=e.getAttribute("href");if(t)return t.baseVal||t}return null};var E=new j,k=function(){this.T=[]},A={current:{configurable:!0},previous:{configurable:!0},size:{configurable:!0}};k.prototype.add=function(e,t){this.T.push({url:e,ns:t})},k.prototype.remove=function(){this.T.pop()},k.prototype.push=function(e,t){this.add(e,t),window.history&&window.history.pushState(null,"",e)},k.prototype.cancel=function(){this.remove(),window.history&&window.history.back()},A.current.get=function(){return this.T[this.T.length-1]},A.previous.get=function(){return this.T.length<2?null:this.T[this.T.length-2]},A.size.get=function(){return this.T.length},Object.defineProperties(k.prototype,A);var T=new k,C=function(e,t){try{var n=function(){if(!t.next.html)return Promise.resolve(e).then((function(e){var n=t.next,r=t.trigger;if(e){var o=E.toElement(e);n.namespace=E.getNamespace(o),n.container=E.getContainer(o),n.html=e,"popstate"===r?T.add(n.url.href,n.namespace):T.push(n.url.href,n.namespace);var i=E.toDocument(e);document.title=i.title}}))}();return Promise.resolve(n&&n.then?n.then((function(){})):void 0)}catch(e){return Promise.reject(e)}},S=h,_={update:C,nextTick:function(){return new Promise((function(e){window.requestAnimationFrame(e)}))},pathToRegexp:S},L=function(){return window.location.origin},$=function(e){var t=e||window.location.port,n=window.location.protocol;return""!==t?parseInt(t,10):"https:"===n?443:80},H=function(e){var t,n=e.replace(L(),""),r={},o=n.indexOf("#");o>=0&&(t=n.slice(o+1),n=n.slice(0,o));var i=n.indexOf("?");return i>=0&&(r=O(n.slice(i+1)),n=n.slice(0,i)),{hash:t,path:n,query:r}},O=function(e){return e.split("&").reduce((function(e,t){var n=t.split("=");return e[n[0]]=n[1],e}),{})},M=function(e){return e.replace(/(\/#.*|\/|#.*)$/,"")},q={getHref:function(){return window.location.href},getOrigin:L,getPort:$,getPath:function(e){return H(e).path},parse:H,parseQuery:O,clean:M},R=function(e){if(this.j=[],"boolean"==typeof e)this.R=e;else{var t=Array.isArray(e)?e:[e];this.j=t.map((function(e){return S(e)}))}};R.prototype.checkUrl=function(e){if("boolean"==typeof this.R)return this.R;var t=H(e).path;return this.j.some((function(e){return null!==e.exec(t)}))};var I=function(e){function t(t){e.call(this,t),this.T=new Map}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e,t,n){return this.checkUrl(e)||this.T.set(e,{action:n,request:t}),{action:n,request:t}},t.prototype.get=function(e){return this.T.get(e)},t.prototype.getRequest=function(e){return this.T.get(e).request},t.prototype.getAction=function(e){return this.T.get(e).action},t.prototype.has=function(e){return this.T.has(e)},t.prototype.delete=function(e){return this.T.delete(e)},t.prototype.update=function(e,t){var n=Object.assign({},this.T.get(e),t);return this.T.set(e,n),n},t}(R);function N(e,t,n){return void 0===t&&(t=2e3),new Promise((function(r,o){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===XMLHttpRequest.DONE)if(200===i.status)r(i.responseText);else if(i.status){var t={status:i.status,statusText:i.statusText};n(e,t),o(t)}},i.ontimeout=function(){var r=new Error("Timeout error ["+t+"]");n(e,r),o(r)},i.onerror=function(){var t=new Error("Fetch error");n(e,t),o(t)},i.open("GET",e),i.timeout=t,i.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),i.setRequestHeader("x-barba","yes"),i.send()}))}var W=function(){return!window.history.pushState},F=function(e){return!e.el||!e.href},D=function(e){var t=e.event;return t.which>1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey},z=function(e){var t=e.el;return t.hasAttribute("target")&&"_blank"===t.target},B=function(e){var t=e.el;return void 0!==t.protocol&&window.location.protocol!==t.protocol||void 0!==t.hostname&&window.location.hostname!==t.hostname},U=function(e){var t=e.el;return void 0!==t.port&&$()!==$(t.port)},Y=function(e){var t=e.el;return t.getAttribute&&"string"==typeof t.getAttribute("download")},X=function(e){return e.el.hasAttribute(x.prefix+"-"+x.prevent)},K=function(e){return Boolean(e.el.closest("["+x.prefix+"-"+x.prevent+'="all"]'))},Q=function(e){return M(e.href)===M(window.location.href)},V=function(e){function t(t){e.call(this,t),this.suite=[],this.tests=new Map,this.init()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.init=function(){this.add("pushState",W),this.add("exists",F),this.add("newTab",D),this.add("blank",z),this.add("corsDomain",B),this.add("corsPort",U),this.add("download",Y),this.add("preventSelf",X),this.add("preventAll",K),this.add("sameUrl",Q,!1)},t.prototype.add=function(e,t,n){void 0===n&&(n=!0),this.tests.set(e,t),n&&this.suite.push(e)},t.prototype.run=function(e,t,n,r){return this.tests.get(e)({el:t,event:n,href:r})},t.prototype.checkLink=function(e,t,n){var r=this;return this.suite.some((function(o){return r.run(o,e,t,n)}))},t}(R),G=function(e){void 0===e&&(e=[]),this.logger=new c("@barba/core"),this.all=[],this.appear=[],this.k=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],e&&(this.all=this.all.concat(e)),this.update()};G.prototype.add=function(e,t){switch(e){case"rule":this.k.splice(t.position||0,0,t.value);break;case"transition":default:this.all.push(t)}this.update()},G.prototype.resolve=function(e,t){var n,r=this;void 0===t&&(t={});var o=t.appear?this.appear:this.all;o=o.filter(t.self?function(e){return e.name&&"self"===e.name}:function(e){return!e.name||"self"!==e.name});var i=new Map,a=o.find((function(n){var o=!0,a={};return!(!t.self||"self"!==n.name)||(r.k.reverse().forEach((function(i){o&&(o=r.O(n,i,e,a),t.appear||(n.from&&n.to&&(o=r.O(n,i,e,a,"from")&&r.O(n,i,e,a,"to")),n.from&&!n.to&&(o=r.O(n,i,e,a,"from")),!n.from&&n.to&&(o=r.O(n,i,e,a,"to"))))})),i.set(n,a),o)})),s=i.get(a),c=[];if(c.push(t.appear?"appear":"page"),t.self&&c.push("self"),s){var u=[a];Object.keys(s).length>0&&u.push(s),(n=this.logger).info.apply(n,["Transition found ["+c.join(",")+"]"].concat(u))}else this.logger.info("No transition found ["+c.join(",")+"]");return a},G.prototype.update=function(){var e=this;this.all=this.all.map((function(t){return e.L(t)})).sort((function(e,t){return e.priority-t.priority})).reverse().map((function(e){return delete e.priority,e})),this.appear=this.all.filter((function(e){return void 0!==e.appear}))},G.prototype.O=function(e,t,n,r,o){var i=!0,a=!1,s=e,c=t.name,u=c,l=c,h=c,p=o?s[o]:s,d="to"===o?n.next:n.current;if(o?p&&p[c]:p[c]){switch(t.type){case"strings":default:var f=Array.isArray(p[u])?p[u]:[p[u]];d[u]&&-1!==f.indexOf(d[u])&&(a=!0),-1===f.indexOf(d[u])&&(i=!1);break;case"object":var m=Array.isArray(p[l])?p[l]:[p[l]];d[l]&&(d[l].name&&-1!==m.indexOf(d[l].name)&&(a=!0),-1===m.indexOf(d[l].name)&&(i=!1));break;case"function":p[h](n)?a=!0:i=!1}a&&(o?(r[o]=r[o]||{},r[o][c]=s[o][c]):r[c]=s[c])}return i},G.prototype.M=function(e,t,n){var r=0;return(e[t]||e.from&&e.from[t]||e.to&&e.to[t])&&(r+=Math.pow(10,n),e.from&&e.from[t]&&(r+=1),e.to&&e.to[t]&&(r+=2)),r},G.prototype.L=function(e){var t=this;e.priority=0;var n=0;return this.k.forEach((function(r,o){n+=t.M(e,r.name,o+1)})),e.priority=n,e};var J=function(e){void 0===e&&(e=[]),this.logger=new c("@barba/core"),this.S=!1,this.store=new G(e)},Z={isRunning:{configurable:!0},hasAppear:{configurable:!0},hasSelf:{configurable:!0},shouldWait:{configurable:!0}};J.prototype.get=function(e,t){return this.store.resolve(e,t)},Z.isRunning.get=function(){return this.S},Z.isRunning.set=function(e){this.S=e},Z.hasAppear.get=function(){return this.store.appear.length>0},Z.hasSelf.get=function(){return this.store.all.some((function(e){return"self"===e.name}))},Z.shouldWait.get=function(){return this.store.all.some((function(e){return e.to&&!e.to.route||e.sync}))},J.prototype.doAppear=function(e){var t=e.data,r=e.transition;try{var o=this;function i(e){o.S=!1}var a=r||{};o.S=!0;var s=n((function(){return Promise.resolve(o.$("beforeAppear",t,a)).then((function(){return Promise.resolve(o.appear(t,a)).then((function(){return Promise.resolve(o.$("afterAppear",t,a)).then((function(){}))}))}))}),(function(e){throw o.S=!1,o.logger.error(e),new Error("Transition error [appear]")}));return s&&s.then?s.then(i):i()}catch(e){return Promise.reject(e)}},J.prototype.doPage=function(e){var t=e.data,r=e.transition,o=e.page,i=e.wrapper;try{var a=this;function s(e){a.S=!1}var c=r||{},u=!0===c.sync||!1;a.S=!0;var l=n((function(){function e(){return Promise.resolve(a.$("before",t,c)).then((function(){function e(e){return Promise.resolve(a.$("after",t,c)).then((function(){return Promise.resolve(a.remove(t)).then((function(){}))}))}var r=function(){if(u)return n((function(){return Promise.resolve(a.add(t,i)).then((function(){return Promise.resolve(a.$("beforeLeave",t,c)).then((function(){return Promise.resolve(a.$("beforeEnter",t,c)).then((function(){return Promise.resolve(Promise.all([a.leave(t,c),a.enter(t,c)])).then((function(){return Promise.resolve(a.$("afterLeave",t,c)).then((function(){return Promise.resolve(a.$("afterEnter",t,c)).then((function(){}))}))}))}))}))}))}),(function(){throw new Error("Transition error [page][sync]")}));{function e(e){return n((function(){var e=function(){if(!1!==r)return Promise.resolve(a.add(t,i)).then((function(){return Promise.resolve(a.$("beforeEnter",t,c)).then((function(){return Promise.resolve(a.enter(t,c,r)).then((function(){return Promise.resolve(a.$("afterEnter",t,c)).then((function(){}))}))}))}))}();if(e&&e.then)return e.then((function(){}))}),(function(){throw new Error("Transition error [page][enter]")}))}var r=!1,s=n((function(){return Promise.resolve(a.$("beforeLeave",t,c)).then((function(){return Promise.resolve(Promise.all([a.leave(t,c),C(o,t)]).then((function(e){return e[0]}))).then((function(e){return r=e,Promise.resolve(a.$("afterLeave",t,c)).then((function(){}))}))}))}),(function(){throw new Error("Transition error [page][leave]")}));return s&&s.then?s.then(e):e()}}();return r&&r.then?r.then(e):e()}))}var r=function(){if(u)return Promise.resolve(C(o,t)).then((function(){}))}();return r&&r.then?r.then(e):e()}),(function(e){throw a.S=!1,a.logger.error(e),new Error("Transition error")}));return l&&l.then?l.then(s):s()}catch(e){return Promise.reject(e)}},J.prototype.appear=function(e,t){try{return Promise.resolve(l.do("appear",e,t)).then((function(){return t.appear?a(t.appear)(e):Promise.resolve()}))}catch(e){return Promise.reject(e)}},J.prototype.leave=function(e,t){try{return Promise.resolve(l.do("leave",e,t)).then((function(){return t.leave?a(t.leave)(e):Promise.resolve()}))}catch(e){return Promise.reject(e)}},J.prototype.enter=function(e,t,n){try{return Promise.resolve(l.do("enter",e,t)).then((function(){return t.enter?a(t.enter)(e,n):Promise.resolve()}))}catch(e){return Promise.reject(e)}},J.prototype.add=function(e,t){try{t.appendChild(e.next.container),l.do("nextAdded",e)}catch(e){return Promise.reject(e)}},J.prototype.remove=function(e){try{var t=e.current.container;document.body.contains(t)&&(t.parentNode.removeChild(t),l.do("currentRemoved",e))}catch(e){return Promise.reject(e)}},J.prototype.$=function(e,t,n){try{return Promise.resolve(l.do(e,t,n)).then((function(){return n[e]?a(n[e])(t):Promise.resolve()}))}catch(e){return Promise.reject(e)}},Object.defineProperties(J.prototype,Z);var ee=function(e){var t=this;this.names=["beforeAppear","afterAppear","beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,0!==e.length&&(e.forEach((function(e){t.byNamespace.set(e.namespace,e)})),this.names.forEach((function(e){l[e](t.q(e),t)})))};ee.prototype.q=function(e){var t=this;return function(n){var r=e.match(/enter/i)?n.next:n.current,o=t.byNamespace.get(r.namespace);o&&o[e]&&o[e](n)}},Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var te={container:void 0,html:void 0,namespace:void 0,url:{hash:void 0,href:void 0,path:void 0,query:{}}},ne=function(){this.version="2.4.0",this.schemaPage=te,this.Logger=c,this.logger=new c("@barba/core"),this.plugins=[],this.hooks=l,this.dom=E,this.helpers=_,this.history=T,this.request=N,this.url=q},re={data:{configurable:!0},wrapper:{configurable:!0}};return ne.prototype.use=function(e,t){var n=this.plugins;n.indexOf(e)>-1?this.logger.warn("Plugin ["+e.name+"] already installed."):"function"==typeof e.install?(e.install(this,t),n.push(e)):this.logger.warn("Plugin ["+e.name+'] has no "install" method.')},ne.prototype.init=function(e){void 0===e&&(e={});var t=e.transitions;void 0===t&&(t=[]);var n=e.views;void 0===n&&(n=[]);var r=e.prevent;void 0===r&&(r=null);var o=e.timeout;void 0===o&&(o=2e3);var i=e.requestError,a=e.cacheIgnore;void 0===a&&(a=!1);var s=e.prefetchIgnore;void 0===s&&(s=!1);var u=e.schema;void 0===u&&(u=x);var l=e.debug;void 0===l&&(l=!1);var h=e.logLevel;if(void 0===h&&(h="off"),c.setLevel(!0===l?"debug":h),this.logger.info(this.version),Object.keys(u).forEach((function(e){x[e]&&(x[e]=u[e])})),this.C=i,this.timeout=o,this.cacheIgnore=a,this.prefetchIgnore=s,this.B=this.dom.getWrapper(),!this.B)throw new Error("[@barba/core] No Barba wrapper found");this.B.setAttribute("aria-live","polite"),this.H();var p=this.data.current;if(!p.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new I(a),this.prevent=new V(s),this.transitions=new J(t),this.views=new ee(n),null!==r){if("function"!=typeof r)throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",r)}this.history.add(p.url.href,p.namespace),this.I=this.I.bind(this),this.N=this.N.bind(this),this.U=this.U.bind(this),this.D(),this.plugins.forEach((function(e){return e.init()}));var d=this.data;d.trigger="barba",d.next=d.current,this.hooks.do("ready",d),this.appear(d),this.H()},ne.prototype.destroy=function(){this.H(),this.X(),this.hooks.clear(),this.plugins=[]},re.data.get=function(){return this._},re.wrapper.get=function(){return this.B},ne.prototype.force=function(e){window.location.assign(e)},ne.prototype.go=function(e,t,n){var r;if(void 0===t&&(t="barba"),!(r="popstate"===t?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(e):this.prevent.run("sameUrl",null,null,e))||this.transitions.hasSelf)return n&&(n.stopPropagation(),n.preventDefault()),this.page(e,t,r)},ne.prototype.appear=function(e){try{var t=this;return Promise.resolve(t.hooks.do("beforeEnter",e)).then((function(){function r(){return Promise.resolve(t.hooks.do("afterEnter",e)).then((function(){}))}var o=function(){if(t.transitions.hasAppear){var r=n((function(){var n=t.transitions.get(e,{appear:!0});return Promise.resolve(t.transitions.doAppear({transition:n,data:e})).then((function(){}))}),(function(e){t.logger.error(e)}));if(r&&r.then)return r.then((function(){}))}}();return o&&o.then?o.then(r):r()}))}catch(e){return Promise.reject(e)}},ne.prototype.page=function(e,t,r){try{var o=this;function i(){var e=o.data;return Promise.resolve(o.hooks.do("page",e)).then((function(){var t=n((function(){var t=o.transitions.get(e,{appear:!1,self:r});return Promise.resolve(o.transitions.doPage({data:e,page:a,transition:t,wrapper:o.B})).then((function(){o.H()}))}),(function(e){o.logger.error(e)}));if(t&&t.then)return t.then((function(){}))}))}if(o.transitions.isRunning)return void o.force(e);o.data.next.url=Object.assign({},{href:e},o.url.parse(e)),o.data.trigger=t;var a=o.cache.has(e)?o.cache.update(e,{action:"click"}).request:o.cache.set(e,o.request(e,o.timeout,o.onRequestError.bind(o,t)),"click").request,s=function(){if(o.transitions.shouldWait)return Promise.resolve(C(a,o.data)).then((function(){}))}();return s&&s.then?s.then(i):i()}catch(e){return Promise.reject(e)}},ne.prototype.onRequestError=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];this.transitions.isRunning=!1;var r=t[0],o=t[1],i=this.cache.getAction(r);return this.cache.delete(r),!(this.C&&!1===this.C(e,i,r,o)||("click"===i&&this.force(r),1))},ne.prototype.prefetch=function(e){var t=this;this.cache.has(e)||this.cache.set(e,this.request(e,this.timeout,this.onRequestError.bind(this,"barba")).catch((function(e){t.logger.error(e)})),"prefetch")},ne.prototype.D=function(){!0!==this.prefetchIgnore&&(document.addEventListener("mouseover",this.I),document.addEventListener("touchstart",this.I)),document.addEventListener("click",this.N),window.addEventListener("popstate",this.U)},ne.prototype.X=function(){!0!==this.prefetchIgnore&&(document.removeEventListener("mouseover",this.I),document.removeEventListener("touchstart",this.I)),document.removeEventListener("click",this.N),window.removeEventListener("popstate",this.U)},ne.prototype.I=function(e){var t=this,n=this.F(e);if(n){var r=this.dom.getHref(n);this.prevent.checkUrl(r)||this.cache.has(r)||this.cache.set(r,this.request(r,this.timeout,this.onRequestError.bind(this,n)).catch((function(e){t.logger.error(e)})),"enter")}},ne.prototype.N=function(e){var t=this.F(e);t&&this.go(this.dom.getHref(t),t,e)},ne.prototype.U=function(){this.go(this.url.getHref(),"popstate")},ne.prototype.F=function(e){for(var t=e.target;t&&!this.dom.getHref(t);)t=t.parentNode;if(t&&!this.prevent.checkLink(t,e,this.dom.getHref(t)))return t},ne.prototype.H=function(){var e=this.url.getHref(),t={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:Object.assign({},{href:e},this.url.parse(e))};this._={current:t,next:Object.assign({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},Object.defineProperties(ne.prototype,re),new ne})),function(e){"use strict";function t(t,n=1.7){return new Promise(((r,o)=>{window.dispatchEvent(new CustomEvent("arts/barba/transition/clone/before"));const i=new gsap.timeline,a=e(t.next.container),s=e("#js-page-transition-curtain"),c=a.find(".section-masthead"),u=c.attr("data-background-color"),l=c.find(".js-transition-img"),h=e(".clone"),p=h.find(".js-transition-img__transformed-el"),d=l.find(".js-transition-img__transformed-el");if(!l.length||!h.length)return void o(!0);const{top:f,left:m,width:g,height:w}=l.get(0).getBoundingClientRect(),v=d.css(["transform","width","height","objectPosition","objectFit"]),y=l.css("transform"),b=l.css("border-radius"),P="none"===h.css("clip-path")?"":"circle(100% at center)",x=window.$body.offset().top+f;i.setCurtain(s,{background:u}).set(h,{maxWidth:"100%",maxHeight:"100%"}).set(a,{clearProps:"position"}).add([gsap.to(p,{yPercent:0,xPercent:0,paddingBottom:0,transform:v.transform,width:v.width,height:v.height,objectFit:v.objectFit,objectPosition:v.objectPosition,duration:1.2,ease:"expo.inOut",transition:"none",top:"auto",left:"auto",right:"auto",bottom:"auto",autoRound:!1}),gsap.to(h,{transform:y,top:x,left:m,width:g,height:w,duration:1.2,ease:"expo.inOut",transition:"none",borderRadius:b,clipPath:P,autoRound:!1,onComplete:()=>{window.rhye.components.Scroll.scrollToTop()}}),gsap.effects.moveCurtain(s,{y:"0%",duration:1.2})]).add((()=>{gsap.set(a,{clearProps:"all"}),gsap.set(window.$body,{clearProps:"background-color"}),gsap.effects.setCurtain(s),r(!0)})).totalDuration(n).timeScale(window.theme.animations.timeScale.ajaxFlyingImageTransition||1)}))}function n(e,t,n=!1){return new Promise((r=>{if(!e.length)return void r(!0);const o=new gsap.timeline,i=e.clone(),{top:a,left:s,width:c,height:u}=e.get(0).getBoundingClientRect(),l=i.find("img");e.find("video").length&&(i.find("video").get(0).currentTime=e.find("video").get(0).currentTime),i.addClass("clone").appendTo(window.$barbaWrapper),n&&o.set(i,{transform:e.css("transform")}),o.set(l,{transition:"none"}).set(i,{clipPath:e.css("clip-path"),position:"fixed",top:t?t.top:a,left:t?t.left:s,width:t?t.width:c,height:t?t.height:u,zIndex:350}).set(i,{delay:.1,display:"block"}).set(e,{delay:.1,autoAlpha:0}).add((()=>r(!0)))}))}function r(t,n=1.8){return new Promise((r=>{const o=new gsap.timeline,i=e(t.current.container),a=e(t.next.container),s=e("#js-page-transition-curtain"),c=a.find(".section-masthead").attr("data-background-color"),u=e(".clone");o.set(u,{clearProps:"transition"}).setCurtain(s,{background:c}).add([gsap.effects.moveCurtain(s,{y:"0%",duration:1.2}),gsap.to(u,{autoAlpha:0,duration:.6,display:"none"})]).set(a,{clearProps:"all",autoAlpha:1,zIndex:300}).set(i,{position:"fixed",top:0,left:0,width:"100%",zIndex:"-1",autoAlpha:0}).setCurtain(s,{display:"none",clearProps:"opacity,transform",zIndex:-1}).add((()=>r(!0))).totalDuration(n)}))}function o(t){return new Promise((n=>{const r=e(t.next.container),o=e("#js-page-transition-curtain, #js-header-curtain-transition"),i=r.find(".section-nav-projects");i.length&&window.rhye.components.AssetsManager.loadSectionNavProjects().then((()=>{new window.rhye.components.SectionNavProjects({target:i,scope:r})})),window.dispatchEvent(new CustomEvent("arts/barba/transition/end")),gsap.effects.setCurtain(o,{display:"none"}),void 0!==window.$spinner&&window.$spinner.length&&gsap.to(window.$spinner,.6,{autoAlpha:0}),void 0!==window.theme.Header&&window.theme.Header.run(),ScrollTrigger.refresh(!0),setTimeout((()=>{window.rhye.functions.enableAnimations(),e(".clone").remove(),window.rhye.components.Scroll.lock(!1),window.$barbaWrapper.removeClass("cursor-progress is-ajax-loading"),e(".menu").removeClass("menu_disabled"),"undefined"!=typeof Waypoint&&Waypoint.refreshAll()}),100),window.rhye.components.Scroll.scrollToAnchorFromHash(),n(!0)}))}function i(t){return new Promise((n=>{const r=[m(t),v(t),g(t),f(t),w(t)],o=e(t.next.container),i=o.find(".elementor-section"),a=o.find(".section-masthead:not(.d-none)"),s=o.find(".wpcf7-form"),c=e(".elementor-popup-modal"),u=document.createEvent("MutationEvents");return(window.theme.ajax.loadMissingScripts||window.theme.ajax.updateScriptNodes)&&r.push(function(t){return new Promise((n=>{const r=jQuery.parseHTML(t.next.html,document,!0),o=[],i=y(window.theme.ajax.updateScriptNodes)||[];e(r).filter("script[src][id]").each((function(){const e=`script[id="${this.id}"]`,t=document.querySelector(e);null==t?o.push(window.rhye.components.AssetsManager.load({type:"script",id:this.id,src:this.src})):i.includes(e)&&(t.remove(),o.push(window.rhye.components.AssetsManager.load({type:"script",id:this.id,src:this.src,update:!0})))})),Promise.all(o).then((()=>n(!0)),(()=>n(!0)))}))}(t)),window.theme.ajax.loadMissingStyles&&r.push(function(t){return new Promise((n=>{const r=jQuery.parseHTML(t.next.html,document,!0),o=[];e(r).filter('link[rel="stylesheet"][id]').each((function(e){const t=document.querySelector(`link[id="${this.id}"]`);null==t&&o.push(window.rhye.components.AssetsManager.load({type:"style",id:this.id?this.id:`pjax-asset-${e}-css`,src:this.href}))})),Promise.all(o).then((()=>n(!0)),(()=>n(!0)))}))}(t)),a.length&&a.addClass("js-cancel-init"),window.theme.isFirstLoad=!1,u.initMutationEvent("DOMContentLoaded",!0,!0,document,"","","",0),u.detail={scope:o,container:o,scrollToHashElement:!1},window.$pageWrapper=o,window.$pageContent=o.find(".page-wrapper__content"),Promise.all(r).then((()=>document.fonts.ready)).then((()=>function(t){return new Promise(((n,r)=>{const o=e(t.next.container),i=o.find(".section-masthead:not(.d-none)");i.length?window.rhye.components.AssetsManager.load(window.theme.assets["section-masthead-js"]).then((()=>{new window.rhye.components.SectionMasthead({target:i,scope:o}),n(!0)})):n(!0)}))}(t))).then((()=>{i.length&&(gsap.set(i,{clearProps:"all"}),i.removeClass("elementor-sticky--active")),o.find(".elementor-sticky__spacer").remove(),o.find(".elementor-headline-animation-type-typing .elementor-headline-dynamic-wrapper").empty(),o.find(".e-lottie__animation").empty(),s.length&&"undefined"!=typeof wpcf7cf&&"function"==typeof wpcf7cf.initForm&&wpcf7cf.initForm(s),c.length&&c.remove(),e("video[playsinline][muted][autoplay]").each((function(){this.paused&&this.play()})),window.dispatchEvent(new CustomEvent("arts/barba/transition/init/before",{detail:{scope:o,container:o,scrollToHashElement:!1}})),window.rhye.components.Scroll.scrollToTop(),document.dispatchEvent(u),window.theme.ajax.evalInlineContainerScripts&&o.find("script").each((function(){try{window.eval(this.text)}catch(e){console.warn(e)}})),window.dispatchEvent(new CustomEvent("arts/barba/transition/init/after",{detail:{scope:o,container:o,scrollToHashElement:!1}})),function(){function e(){if("function"==typeof gtag&&"object"==typeof window.gaData&&"undefined"!==Object.keys(window.gaData)[0]){const e=Object.keys(window.gaData)[0],t=window.location.href.replace(window.location.origin,"");gtag("js",new Date),gtag("config",e,{page_title:document.title,page_path:t})}}function t(){"function"==typeof fbq&&fbq("track","PageView")}function n(){if("function"==typeof ym){const e=r();ym(e,"hit",window.location.href,{title:document.title})}}function r(){return void 0!==window.Ya&&(window.Ya.Metrika2,1)?window.Ya.Metrika2.counters()[0].id||null:void 0!==window.Ya&&(window.Ya.Metrika,1)&&window.Ya.Metrika.counters()[0].id||null}e(),t(),n()}(),setTimeout((()=>{void 0!==window.elementorFrontend&&elementorFrontend.init()}),0),n(!0)})).catch((e=>{barba.force(t.next.url.href),console.warn(e)}))}))}function a(t){return new Promise((n=>{const r=e(t.current.container),o=e(t.next.container),i=o.find(".section-masthead"),a=i.find(".section-masthead__background"),s=new gsap.timeline;i.length&&i.attr("data-arts-os-animation","animated"),a.length&&a.addClass("js-cancel-animation"),s.set(r,{width:"100vw",height:"100vh",overflow:"hidden",zIndex:300,onComplete:()=>{window.rhye.functions.killAnimations(),r.empty()}}).set(o,{position:"fixed",top:0,left:0,width:"100%",zIndex:300,autoAlpha:0,delay:.1}).add((()=>n(!0)))}))}function s(t){return new Promise((t=>{window.dispatchEvent(new CustomEvent("arts/barba/transition/start")),e(".menu").addClass("menu_disabled"),window.rhye.components.Scroll.lock(!0),window.$document.off("resize click"),window.$window.off("resize click orientationchange"),window.$barbaWrapper.addClass("cursor-progress is-ajax-loading"),void 0!==window.$spinner&&window.$spinner.length&&gsap.to(window.$spinner,.6,{autoAlpha:1}),t(!0)}))}const c={name:"blog",from:{namespace:["archive"]},to:{namespace:["archive"]},before:t=>new Promise((n=>{const r=e(t.trigger),o=e(t.current.container).find(".section-blog"),i=o.not(".js-ajax-filter").find(".section-grid__item");o.addClass("pointer-events-none"),window.$barbaWrapper.addClass("is-ajax-loading"),r.is(".js-grid-ajax__filter a")?t.trigger.type="filter":r.is(".pagination a")&&(t.trigger.type="pagination"),i.length&&gsap.to(i,{duration:.6,y:"-5%",transformOrigin:"top center",autoAlpha:0}),window.pageYOffset>1?window.rhye.components.Scroll.scrollTo({x:0,y:0,duration:600,cb:()=>{s().then((()=>n(!0)))}}):s().then((()=>n(!0)))})),beforeLeave:t=>new Promise((n=>{const r=new gsap.timeline,o=e(t.current.container),i=o.find(".section-masthead"),a=o.find(".section-blog").find(".js-grid"),s=a.find(".js-grid__item"),c=i.find(".section-masthead__heading"),u=i.find(".section-masthead__subheading"),l=i.find(".section__headline"),h=i.get(0).hasAttribute("data-arts-os-animation");a.isotope("hideItemElements",s),"pagination"!==t.trigger.type&&h?r.add([gsap.effects.hideWords(u,{duration:.6}),gsap.effects.hideWords(c,{duration:.6,autoAlpha:1}),gsap.effects.hideHeadline(l,{duration:.4})]).add((()=>{n(!0)}),"-=0.3"):setTimeout((()=>{n(!0)}),150)})),beforeEnter:t=>new Promise((n=>{const r=e(t.next.container).find(".section-masthead"),o=e(t.next.container).find(".section-blog"),i=o.find(".js-grid-ajax__filter, .js-filter"),a=i.find(".filter__underline");o.attr("data-arts-os-animation","animated"),i.find(".js-split-text").removeClass("js-split-text"),a.addClass("js-cancel-animation"),"pagination"===t.trigger.type&&(r.removeAttr("data-arts-os-animation"),r.find("[data-split-text-set]").removeAttr("data-split-text-set")),n(!0)})),enter:t=>new Promise((n=>{i(t).then((()=>{const r=e(t.next.container).find(".section-masthead");"pagination"===t.trigger.type&&r.find(".split-text__line").addClass("overflow"),n(!0)}))})),after:t=>new Promise((n=>{e(".section-blog").removeClass("pointer-events-none"),o(t).then((()=>n(!0)))}))},u={name:"flyingImage",custom:({trigger:t})=>"flyingImage"===e(t).data("pjax-link"),before:e=>new Promise((e=>{s().then((()=>e(!0)))})),beforeLeave:t=>new Promise((r=>{const o=e(t.current.container),i=o,a=e(t.trigger),s=a.hasClass("section-nav-projects__link"),c=a.is(".figure-post a"),u=a.hasClass("js-list-hover__link");let l,h;s?(l=o.find(".section-nav-projects .js-transition-img"),h=0):c?(l=a.parents(".figure-post").find(".js-transition-img"),h=200):(l=a.find(".js-transition-img"),h=200),gsap.set([window.$body,o],{backgroundColor:a.closest("section").css("background-color")}),u?(l=a.find(".js-transition-img"),n(l,a.data("coordinates")).then((()=>{gsap.to(i,{duration:.3,autoAlpha:0,onComplete:()=>{r(!0)}})}))):setTimeout((()=>{n(l).then((()=>{gsap.to(i,{duration:.3,autoAlpha:0,onComplete:()=>{r(!0)}})}))}),h)})),beforeEnter:e=>new Promise((t=>{a(e).then((()=>t(!0)))})),enter:e=>new Promise((t=>{i(e).then((()=>t(!0)))})),afterEnter:e=>new Promise((n=>{t(e).then((()=>n(!0)),(()=>{r(e).then((()=>n(!0)))}))})),after:e=>new Promise((t=>{o(e).then((()=>t(!0)))}))},l={name:"fullscreenSlider",custom:({trigger:t})=>"fullscreenSlider"===e(t).data("pjax-link"),before:e=>new Promise((e=>{s().then((()=>e(!0)))})),beforeLeave:t=>new Promise((r=>{const o=e(t.current.container),i=o.find(".page-wrapper__content"),a=e(t.trigger),s=a.closest(".js-slider").find(".swiper-slide-active .js-transition-img");gsap.set([window.$body,o],{backgroundColor:a.closest("section").css("background-color")}),n(s).then((()=>{gsap.to(i,{duration:.3,autoAlpha:0,onComplete:()=>{r(!0)}})}))})),beforeEnter:e=>new Promise((t=>{a(e).then((()=>t(!0)))})),enter:e=>new Promise((t=>{i(e).then((()=>t(!0)))})),afterEnter:e=>new Promise((n=>{t(e).then((()=>n(!0)),(()=>{r(e).then((()=>n(!0)))}))})),after:e=>new Promise((t=>{o(e).then((()=>t(!0)))}))},h={before:e=>new Promise((e=>{s().then((()=>e(!0)))})),beforeLeave:e=>new Promise((e=>{(new gsap.timeline).setCurtain().add((()=>e(!0)))})),beforeEnter:t=>new Promise((n=>{const r=new gsap.timeline,o=e(t.current.container),i=e(t.next.container),a=e("#js-page-transition-curtain"),s=i.find(".section-masthead").attr("data-background-color");r.setCurtain(a,{background:s}).moveCurtain(a,{y:"0%",duration:1.2}).set(i,{clearProps:"all",autoAlpha:1,zIndex:300}).set(o,{position:"fixed",top:0,left:0,width:"100%",zIndex:"-1",autoAlpha:0}).add((()=>{window.rhye.functions.killAnimations(),o.empty(),setTimeout((()=>{n(!0)}),100)})).timeScale(window.theme.animations.timeScale.ajaxCurtainTransition||1)})),enter:e=>new Promise((t=>{i(e).then((()=>t(!0)))})),afterEnter:t=>new Promise((t=>{const n=new gsap.timeline,r=e("#js-page-transition-curtain");n.setCurtain(r).add((()=>t(!0)))})),after:e=>new Promise((t=>{o(e).then((()=>t(!0)))}))},p={name:"listHover",custom:({trigger:t})=>"listHover"===e(t).data("pjax-link"),before:e=>new Promise((e=>{s().then((()=>e(!0)))})),beforeLeave:t=>new Promise((r=>{const o=e(t.current.container),i=o.find(".page-wrapper__content"),a=e(t.trigger),s=a.find(".js-transition-img");let c;s.is(":visible")||(c=a.data("coordinates")),gsap.set([window.$body,o],{backgroundColor:a.closest("section, .elementor-section").css("background-color")}),n(s,c,!0).then((()=>{gsap.to(i,{duration:.3,autoAlpha:0,onComplete:()=>r(!0)})}))})),beforeEnter:e=>new Promise((t=>{a(e).then((()=>t(!0)))})),enter:e=>new Promise((t=>{i(e).then((()=>t(!0)))})),afterEnter:e=>new Promise((n=>{t(e).then((()=>n(!0)),(()=>{r(e).then((()=>n(!0)))}))})),after:e=>new Promise((t=>{o(e).then((()=>t(!0)))}))},d={name:"overlayMenu",custom:({trigger:t})=>{const n=e(t);return void 0!==window.theme.Header&&window.theme.Header.isOverlayOpened()||"#"!==n.attr("href")&&"overlayMenu"===n.data("pjax-link")},before:e=>new Promise((e=>{s().then((()=>{e(!0)}))})),enter:e=>new Promise((t=>{i(e).then((()=>{t(!0)}))})),afterEnter:t=>new Promise((n=>{const r=new gsap.timeline,o=e(t.current.container),i=e(t.next.container),a=e("#page-header"),s=e(e.parseHTML(t.next.html)).find("#page-header"),c=e("#js-header-curtain-transition"),u=window.theme.Header.closeMenuTransition(!0),l=i.find(".section-masthead").attr("data-background-color");r.set([i,o],{autoAlpha:0}).setCurtain(c,{background:l}).moveCurtain(c,{duration:1.2,y:"0%",curve:"top"}).add(u,"-=0.8").setCurtain(c).set(i,{clearProps:"all",autoAlpha:1}).add((()=>{window.theme.Header.setBurger(),s.length&&b(s,a),n(!0)})).timeScale(window.theme.animations.timeScale.overlayMenuClose||1)})),after:e=>new Promise((t=>{o(e).then((()=>{t(!0)}))}))};function f(t){return new Promise((function(n,r){const o=e("#elementor-admin-bar-js-before"),i=e("#wpadminbar");if(!i.length)return void n(!0);const a=e.parseHTML(t.next.html),s=e(a).filter("#wpadminbar");if(s.find(".hide-if-no-customize").removeClass("hide-if-no-customize"),i.replaceWith(s),document.body.classList.contains("elementor-page")&&o.length)try{const e=t.next.html.match(/(?:'|")elementor-admin-bar-js-before(?:'|")>([\s\S.]*?)(?:<\/script>)/i)[1];o.html(e),window.eval(o.text())}catch(e){console.warn(e)}n(!0)}))}function m(t){return new Promise(((n,r)=>{const o=/\<body.*\sclass=["'](.+?)["'].*\>/gi.exec(t.next.html);o&&o[1]?document.body.classList.contains("no-ajax")?r("Transition has been interrupted: Origin page prevents all the inner links from transition."):(document.body.setAttribute("class",o[1]),document.body.classList.contains("page-no-ajax")?r("Transition has been interrupted: Destination page requested a hard refresh."):(void 0!==window.theme.Header&&document.body.classList.contains("elementor-template-canvas")&&window.theme.Header.$el.addClass("hidden"),e(t.next.container).hasClass("js-smooth-scroll")||gsap.set(window.$html,{overflow:"unset"}),n(!0))):n(!0)}))}function g(e){return new Promise(((t,n)=>{let r,o,i,a,s=document.head,c=e.next.html.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0],u=document.createElement("head"),l=y(window.theme.updateHeadNodes),h=s.querySelectorAll('link[rel="preload"]'),p=['meta[name="keywords"]','meta[name="description"]','meta[property^="og"]','meta[name^="twitter"]',"meta[itemprop]","link[itemprop]",'link[rel="prev"]','link[rel="next"]','link[rel="canonical"]','link[rel="alternate"]','link[rel="shortlink"]','link[id*="elementor-post"]','style[id*="elementor-frontend-inline"]','style[id*="elementor-post"]','link[id*="google-fonts"]'];l&&(p=[...p,...l.split(",")],p=[...new Set(p)]),p=p.join(","),u.innerHTML=c;try{r=s.querySelectorAll(p),o=u.querySelectorAll(p),i=[],a=document.querySelectorAll('link[rel="stylesheet"]');for(let e=0;e<h.length;e++)s.removeChild(h[e])}catch(e){n(`Transition has been interrupted: invalid selector given "${l}"`)}for(let e=0;e<a.length;e++)a[e].isLoaded=!0;for(let e=0;e<o.length;e++)void 0!==r[e]?(s.insertBefore(o[e],r[e].nextElementSibling),s.removeChild(r[e])):s.insertBefore(o[e],o[e-1]);a=document.querySelectorAll('link[rel="stylesheet"]');for(let e=0;e<a.length;e++)if(!a[e].isLoaded){const t=new Promise((t=>{a[e].addEventListener("load",(()=>{t(!0)}))}));i.push(t)}Promise.all(i).then((()=>t(!0)))}))}function w(t){return new Promise((n=>{const r=e(".lang-switcher");if(!r.length)return void n(!0);const o=e.parseHTML(t.next.html,document,!0),i=e(o).find(".lang-switcher"),a=i.find(".trp-language-switcher");r.replaceWith(i),i.find("script").each((function(){try{window.eval(this.text)}catch(e){console.warn(e)}})),a.length&&gsap.set(i.find(".trp-ls-shortcode-language, .trp-ls-shortcode-current-language"),{clearProps:"width"}),n(!0)}))}function v(t){return new Promise((n=>{const r=e(t.trigger),o=e(e.parseHTML(t.next.html)),i=["#page-footer","#js-page-transition-curtain","#page-header .menu li","#page-header .menu-overlay li"];void 0!==window.theme.Header&&window.theme.Header.isOverlayOpened()||"#"!==r.attr("href")&&"overlayMenu"===r.data("pjax-link")||i.push("#page-header"),e.each(i,(function(){let t=e(this),n=o.find(this);"#page-header .menu li"!==this||n.length||(n=o.find("#page-header .menu-overlay li")),"#page-header .menu-overlay li"!==this||n.length||(n=o.find("#page-header .menu li")),n.length&&b(n,t)})),n(!0)}))}function y(e){return!(!e||!e.length)&&e.replace(/(\r\n|\n|\r)/gm,"").replace(/(\\n)/g,"").replace(/^[,\s]+|[,\s]+$/g,"").replace(/\s*,\s*/g,",")}function b(t,n){if(1===t.length&&1===n.length){const r=n.get(0),o=n.getAllAttributes(),i=t.getAllAttributes();e.isEmptyObject(i)?[...r.attributes].forEach((e=>r.removeAttribute(e.name))):(Object.keys(o).forEach((e=>{"style"===e||e in i||n.removeAttr(e)})),n.attr(i))}else t.length>1&&n.length>1&&t.length===n.length&&e.each(n,(function(n){const r=e(this),o=t.eq(n).getAllAttributes();e.isEmptyObject(o)?[...this.attributes].forEach((e=>this.removeAttribute(e.name))):r.attr(o)}))}window.rhye.components.PJAX=class extends window.rhye.components.Base{constructor({target:e,scope:t}){super({target:e,scope:t})}run(){barba.init({timeout:15e3,cacheIgnore:!!window.Modernizr.touchevents,prevent:({el:t})=>{let n=e(t),r=n.attr("href"),o=y(window.theme.ajax.preventRules),i=[".no-ajax",".no-ajax a","[data-elementor-open-lightbox]","[data-elementor-lightbox-slideshow]",".lang-switcher a",".wpml-ls-item a",".js-gallery a",".js-album"];return"#"===r||r.indexOf("wp-admin")>-1||r.indexOf("wp-login")>-1||r.indexOf("/feed/")>-1||(!(!n.is('[href*="#"]')||window.location.href!==r.substring(0,r.indexOf("#")))||(!!n.is('[href^="#"]')||("undefined"!=typeof elementor||(n.closest(window.$barbaWrapper).length<1||(o&&(i=[...i,...o.split(",")],i=[...new Set(i)]),n.is(i.join(",")))))))},transitions:[h,u,d,l,p,c]}),window.$document.on("click",'[data-barba="wrapper"] [data-pjax-link]',(()=>{window.dispatchEvent(new CustomEvent("arts/barba/transition/click"))}))}},e.fn.getAllAttributes=function(){var t=this,n={};return t&&t.length&&e.each(t.get(0).attributes,(function(e,r){r=r.nodeName||r.name,null!=(e=t.attr(r))&&!1!==e&&(n[r]=e)})),n}}(jQuery);