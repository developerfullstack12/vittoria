!function(e){"use strict";window.rhye.components.SliderCategories=class extends window.rhye.components.Base{constructor({target:t,scope:i,sliderContent:s,links:n,options:r}){super({target:t,scope:i}),this.sliderContent=s,this.$links=n,this.$items=this.$target.find("[data-category]"),this.$button=this.$target.find("[data-button]"),this.initialCategory=e(this.sliderContent.slides[this.sliderContent.realIndex]).data("category"),this.$initialActiveItem=this.$target.find(`[data-category="${this.initialCategory}"]`),this.$slides=e(s.slides),this.timeline=new gsap.timeline,this.options=r||{duration:.4,ease:"power4.out"},this._bindSliderEvents(),this._bindHoverEvents(),this._getTimelineShowItem(this.$initialActiveItem)}_bindSliderEvents(){this.sliderContent.on("slideChange",(()=>{const e=this.$slides.eq(this.sliderContent.previousIndex).data("category"),t=this.$slides.eq(this.sliderContent.realIndex).data("category"),i=this.$target.find(`[data-category="${t}"]`);t.length||this.timeline.clear().hideLines(this.$items,{y:"100%",stagger:0,duration:this.options.duration,ease:this.options.ease}),i.length&&t!==e&&this.timeline.clear().add(this._getTimelineShowItem(i))}))}_bindHoverEvents(){this.$links.on("mouseenter touchstart",(()=>{this.timeline.clear().add(this._getTimelineShowButton())})).on("mouseleave touchend",(()=>{const e=this.$slides.eq(this.sliderContent.realIndex).data("category"),t=this.$target.find(`[data-category="${e}"]`);t.length&&this.timeline.clear().add(this._getTimelineShowItem(t))}))}_getTimelineShowButton(){return(new gsap.timeline).hideLines(this.$button,{y:"100%",duration:0,stagger:0}).add([gsap.effects.animateLines(this.$button,{duration:this.options.duration,stagger:0,ease:this.options.ease}),gsap.effects.hideLines(this.$items,{y:"-100%",duration:this.options.duration,stagger:0,ease:this.options.ease})])}_getTimelineShowItem(e){return(new gsap.timeline).hideLines(e,{y:"100%",duration:0,stagger:0}).add([gsap.effects.animateLines(e,{duration:this.options.duration,stagger:0,ease:this.options.ease}),gsap.effects.hideLines([this.$items.not(e),this.$button],{y:"-100%",duration:this.options.duration,stagger:0,ease:this.options.ease})])}},window.rhye.components.SliderCounter=class{constructor({slider:t,sliderCounter:i,slideClass:s="",total:n,style:r="roman",addZeros:o=2}){if(!(t&&i&&e(t).length&&e(i).length))return!1;switch(this.slider=t,this.sliderCounter=i,this.slideClass=s,this.numOfSlides=t.slides.length,this.startSlides=parseInt(t.params.slidesPerView,10),this.romanNumerals=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","XIX","XX"],this.zeros=o,this.style=r,this.total=n,this.zeros){case 0:this.prefixCurrent="",this.prefixTotal="";break;case 1:this.prefixCurrent="0",this.prefixTotal=this.numOfSlides>=10?"":"0";break;case 2:this.prefixCurrent="00",this.prefixTotal=this.numOfSlides>=10?"0":"00"}return this._createSlider(),this._renderCounter(),this._renderTotal(),this._bindEvents(),this.counter}_createSlider(){this.counter=new Swiper(this.sliderCounter.get(0),{speed:this.slider.params.speed,direction:"vertical",simulateTouch:!1,allowTouchMove:!1,on:{init:this.removeAllSlides}})}_renderCounter(){for(let e=this.startSlides;e<=this.numOfSlides;e++)if("roman"===this.style)this.counter.appendSlide(this._getSlideTemplate({slideClass:this.slideClass,content:this.romanNumerals[e-1]}));else{const t=e>=10?this.prefixCurrent="0":this.prefixCurrent;this.counter.appendSlide(this._getSlideTemplate({slideClass:this.slideClass,content:t+e}))}}_renderTotal(){const t=e(this.total);t.length&&t.html("roman"===this.style?this.romanNumerals[this.numOfSlides-1]:this.prefixTotal+this.numOfSlides)}_getSlideTemplate({slideClass:e,content:t}){return`<div class="swiper-slide"><div class="${e}">${t}</div></div>`}_bindEvents(){this.slider.on("slideChange",(()=>{this.counter.slideTo(this.slider.realIndex)}))}},window.rhye.components.SliderDistortionEffect=class extends window.rhye.components.Base{constructor({scope:e,target:t,slider:i,intensity:s,aspectRatio:n=1.5,canvasWrapper:r,canvas:o,displacementImage:a,retinaEnabled:h=!1}){super({scope:e,target:t}),this.slider=i,this.speed=parseFloat(i.params.speed/1e3),this.intensity=s,this.aspectRatio=n,this.timeline=new gsap.timeline,this.$wrapper=this.slider.$wrapperEl,this.$canvasWrapper=r,this.canvas=o.get(0),this.displacementImg=a,this.retinaEnabled=h;try{this.distortionEffect=this._getEffect(),this._setSlider(),this._bindEvents()}catch(e){}}_setSlider(){this.slider.params.effect="fade",this.slider.params.fadeEffect.crossFade=!0,this.slider.params.touchRatio=4,this.slider.params.preventInteractionOnTransition=!0,this.slider.params.autoplay.enabled&&this.slider.autoplay.stop(),this.slider.params.mousewheel.enabled&&this.slider.mousewheel.disable(),this.slider.params.keyboard.enabled&&this.slider.keyboard.disable()}_bindEvents(){this.slider.on("slideChange",(()=>{this.distortionEffect.change({from:this.slider.previousIndex,to:this.slider.realIndex,speed:this.speed,intensity:this.slider.realIndex<this.slider.previousIndex?-this.intensity:this.intensity,ease:"power2.inOut"}),this.timeline.clear().to(this.$canvasWrapper,{duration:this.speed,scale:window.rhye.functions.isBrowserFirefox()?1:1.05,transformOrigin:"center center",ease:"power2.out"}).to(this.$canvasWrapper,{duration:2*this.speed,scale:1})}))}_getEffect(){return new window.rhye.components.EffectDistortion({slider:this.slider,canvas:this.canvas,aspect:this.aspectRatio,displacementImage:this.displacementImg,retinaEnabled:this.retinaEnabled,items:e(this.slider.slides)})}_hideSlider(){gsap.set(this.$wrapper,{autoAlpha:0})}},window.rhye.components.SliderDistortionEffectWorker=class extends window.rhye.components.SliderDistortionEffect{constructor({scope:e,target:t,slider:i,intensity:s,aspectRatio:n=1.5,canvasWrapper:r,canvas:o,displacementImage:a,retinaEnabled:h=!1}){super({scope:e,target:t,slider:i,intensity:s,aspectRatio:n,canvasWrapper:r,canvas:o,displacementImage:a,retinaEnabled:h}),this.aspectRatio=n,this.retinaEnabled=h,this.timelineGL=new gsap.timeline,this.counter={value:0},this.speed=parseFloat(this.slider.params.speed/1e3)}_bindEvents(){this.slider.on("slideChange",(()=>{this._change({from:this.slider.previousIndex,to:this.slider.realIndex,speed:this.speed,intensity:this.slider.realIndex<this.slider.previousIndex?-this.intensity:this.intensity,ease:"power2.inOut"}),this.timeline.clear().to(this.$canvasWrapper,{duration:this.speed,scale:window.rhye.functions.isBrowserFirefox()?1:1.05,transformOrigin:"center center",ease:"power2.out"}).to(this.$canvasWrapper,{duration:2*this.speed,scale:1})})),window.$window.on("resize",window.rhye.functions.debounce((()=>{this.worker.postMessage({type:"updateViewport",viewport:this._getCanvasView(),rect:this._getCanvasView()})}),250)),window.$window.one("arts/barba/transition/start",(()=>{this.worker.postMessage({type:"kill"}),this.worker.terminate()}))}_getPixelRatio(e=!1){return!0===e?window.devicePixelRatio:1}_getCanvasView(){const e=this.canvas.getBoundingClientRect(),t={width:0,height:0,aspectRatio:0};return t.width=e.width,t.height=e.height,t.aspectRatio=this.aspectRatio,t}_getViewPort(){return{width:window.innerWidth,height:window.innerHeight,aspectRatio:window.innerWidth/window.innerHeight}}_getEffect(){const t=e(this.slider.slides);this.offscreenCanvas=this.canvas.transferControlToOffscreen(),this.worker=new Worker(window.plugin.assets["effect-distortion-offscreen-js"].src,{type:"module"}),this.worker.postMessage({type:"init",viewport:this._getCanvasView(),rect:this._getCanvasView(),slider:{params:{direction:this.slider.params.direction}},canvas:this.offscreenCanvas,aspect:this.aspectRatio,displacementImage:this.displacementImg,pixelsRatio:this._getPixelRatio(this.retinaEnabled)},[this.offscreenCanvas]),this._loadFirstTexture(t.eq(0)).then((()=>{this._loadOtherTextures(t)})),this.worker.onmessage=e=>{"textureReady"===e.data.type&&0===e.data.index&&(window.$pagePreloader&&window.$pagePreloader.length&&window.$pagePreloader.is(":visible")?window.$window.on("arts/preloader/end",(()=>{this.worker.postMessage({type:"run"}),this._animateInitial()})):(this.worker.postMessage({type:"run"}),this._animateInitial()))}}_animateInitial(e=0){gsap.set(this.slider.$wrapperEl,{autoAlpha:0}),this._change({from:this.slider.realIndex,to:this.slider.realIndex,delay:e,speed:this.speed,onComplete:()=>{this.slider.params.mousewheel.enabled&&this.slider.mousewheel.enable(),this.slider.params.keyboard.enabled&&this.slider.keyboard.enable(),this.slider.params.autoplay.enabled&&this.slider.autoplay.start()}})}_change({from:e=0,to:t=0,speed:i=1.2,intensity:s=.25,delay:n=0,ease:r="power3.out",onComplete:o,onStart:a}){this.worker.postMessage({type:"setChange",from:e,to:t,intensity:s}),this.timelineGL.clear().fromTo(this.counter,{value:0},{value:1,ease:r,duration:i,delay:n,onStart:()=>{"function"==typeof a&&a()},onUpdate:()=>{this.worker.postMessage({type:"changeAnimate",value:this.counter.value})},onComplete:()=>{"function"==typeof o&&o()}})}_loadFirstTexture(e){const t=e.find("img,video").removeAttr("loading");return new Promise((e=>{t.length?t.Lazy({chainable:!1,afterLoad:t=>{t.one("load",(()=>{this.worker.postMessage({type:"loadTexture",index:0,url:t.get(0).currentSrc}),e(!0)}))}}):e(!0)}))}_loadOtherTextures(e){const t=e.find("img, video").removeAttr("loading"),i=t.Lazy({chainable:!1,afterLoad:e=>{const s=t.index(e);e.one("load",(()=>{this.worker.postMessage({type:"loadTexture",index:s,url:e.get(0).currentSrc})})),i.update()}});i.force(i.getItems())}},window.rhye.components.SliderDots=class{constructor({slider:e,container:t}){if(this.slider=e,this.$container=t,this.$dots=this.$container.find(".slider__dot"),this.delay=this.slider.params.autoplay.enabled||this.slider.params.autoplay.enabledLater?parseFloat(this.slider.params.autoplay.delay/1e3):parseFloat(this.slider.params.speed/1e3/2),this.timeline=new gsap.timeline,this.initialSetTimeline=new gsap.timeline({paused:!0}),!this.$dots.length)return!1;this.run()}run(){this._renderDots(),this._prepare(),this._bindEvents()}_renderDots(){this.$dots.append(this._getDotTemplate()),this.$circles=this.$dots.find(".circle")}_prepare(){gsap.set(this.$circles,{strokeOpacity:0,transformOrigin:"center center",rotate:180,drawSVG:"100% 100%"});const e=this.$dots.eq(0).find(".circle");this.initialSetTimeline.fromTo(e,{strokeOpacity:1,rotate:0,transformOrigin:"center center",drawSVG:"100% 100%",ease:"power3.inOut"},{strokeOpacity:1,rotate:180,transformOrigin:"center center",duration:this.delay,drawSVG:"0% 100%"})}_bindEvents(){this.slider.on("autoplayStop",(()=>{this.timeline.pause(),this.initialSetTimeline&&this.initialSetTimeline.pause()})).on("autoplayStart",(()=>{this.timeline.play(),this.initialSetTimeline&&this.initialSetTimeline.play()})).on("transitionStart",(()=>{this._setCurrentDot(this.slider.realIndex)}))}_setCurrentDot(e=0){const t=this.$dots.eq(e).find(".circle"),i=this.$circles.not(t);this.timeline.clear().add((()=>{this.initialSetTimeline&&(this.initialSetTimeline.kill(),this.initialSetTimeline=void 0)})).to(i,{duration:this.delay/10,transformOrigin:"center center",drawSVG:"0% 0%",ease:"expo.inOut"}).set(i,{strokeOpacity:0}).fromTo(t,{strokeOpacity:1,rotate:0,transformOrigin:"center center",drawSVG:"100% 100%",ease:"power3.inOut"},{strokeOpacity:1,rotate:180,transformOrigin:"center center",duration:this.delay,drawSVG:"0% 100%"})}_getDotTemplate(){return'\n\t\t\t<svg viewBox="0 0 152 152" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n\t\t\t\t<g fill="none" fill-rule="evenodd"><g transform="translate(-134.000000, -98.000000)">\n\t\t\t\t\t<path class="circle" d="M135,174a75,75 0 1,0 150,0a75,75 0 1,0 -150,0"></path>\n\t\t\t\t</g>\n\t\t\t</svg>\n\t\t'}},window.rhye.components.SliderHoverBackgrounds=class extends window.rhye.components.Base{constructor({target:e,scope:t,sliderImg:i,images:s,links:n,hoverClass:r}){super({scope:t,target:e}),this.$images=s,this.$links=n,this.hoverClass=r,this.$links.length&&this._bindHoverEvents()}_bindHoverEvents(){const t=this;this.$links.each((function(){e(this).on("mouseenter touchstart",(()=>{t.$target.addClass(t.hoverClass)})).on("mouseleave touchend",(()=>{t.$target.removeClass(t.hoverClass)}))}))}},window.rhye.components.SliderTextTransitions=class{constructor({slider:t,direction:i,offset:s=40,staggerHeadings:n=.3,staggerTexts:r=.2,heading:o,subheading:a,description:h,link:d}){this.slider=t,this.$slides=e(this.slider.slides),this.offset=s,this.direction=i||this.slider.params.direction,this.speed=parseFloat(this.slider.params.speed/1e3),this.$heading=o,this.$subheading=a,this.$description=h,this.$link=d,this.elementsLength=this._countExistentElements(),this.timeline=new gsap.timeline,this.hideTimeline=new gsap.timeline,this.ease="power4.out",this.staggerHeadings=n,this.staggerTexts=r,this.animationDirections=this._getAnimationDirections(),this._initialSet(),this._bindEvents()}_countExistentElements(){let e=0;return this.$heading&&this.$heading.length&&e++,this.$subheading&&this.$subheading.length&&e++,this.$description&&this.$description.length&&e++,this.$link&&this.$link.length&&e++,e}_bindEvents(){this.slider.on("slideChange",(()=>{this.slider.realIndex>this.slider.previousIndex&&this._slideChangeTransition({direction:"next"}),this.slider.realIndex<this.slider.previousIndex&&this._slideChangeTransition({direction:"prev"})}))}_initialSet(){const e=this._getSlideAnimationDirections({direction:"next"});this.$subheading&&this.$subheading.length&&window.rhye.components.SetText.setChars({target:this.$subheading.not(this.$subheading.eq(0)),x:e.in.x/4,y:e.in.y/4}),this.$heading&&this.$heading.length&&window.rhye.components.SetText.setChars({target:this.$heading.not(this.$heading.eq(0)),x:e.in.x,y:e.in.y}),this.$description&&this.$description.length&&window.rhye.components.SetText.setLines({target:this.$description.not(this.$description.eq(0)),autoAlpha:1,y:"100%"}),this.$link&&this.$link.length&&gsap.set(this.$link.not(this.$link.eq(0)),{y:(this.animationDirections.offset.y.next.in||this.animationDirections.offset.x.next.in)/2,autoAlpha:0})}_slideChangeTransition({direction:e="next"}){const t=this,i=this._getSlideAnimationDirections({direction:e}),s=this.$slides.eq(this.slider.previousIndex),n=(s.find(this.$heading),s.find(this.$subheading),s.find(this.$description),s.find(this.$link)),r=this.$slides.eq(this.slider.realIndex),o=r.find(this.$heading),a=r.find(this.$subheading),h=r.find(this.$description),d=r.find(this.$link);this.timeline.clear(),this.$subheading&&this.$subheading.length&&t.timeline.add([gsap.effects.hideChars(this.$subheading.not(a),{duration:t.speed/2,x:i.out.x/4,y:i.out.y/4,stagger:window.rhye.functions.distributeByPosition({amount:t.staggerHeadings,from:i.out.from}),ease:t.ease}),gsap.effects.hideChars(a,{duration:0,x:i.in.x/4,y:i.in.y/4})],"0"),this.$heading&&this.$heading.length&&t.timeline.add([gsap.effects.hideChars(this.$heading.not(o),{duration:t.speed,x:i.out.x,y:i.out.y,stagger:window.rhye.functions.distributeByPosition({amount:t.staggerHeadings,from:i.out.from}),ease:t.ease}),gsap.effects.hideChars(o,{duration:0,x:i.in.x,y:i.in.y})],"0"),this.$description&&this.$description.length&&t.timeline.add([gsap.effects.hideLines(this.$description.not(h),{duration:t.speed,y:"next"===e?"-100%":"100%",stagger:window.rhye.functions.distributeByPosition({from:"next"===e?"start":"end",amount:t.staggerTexts}),ease:t.ease}),gsap.effects.hideLines(h,{duration:0,y:"next"===e?"100%":"-100%"})],"0"),n.length&&t.timeline.to(n,{duration:t.speed,y:(t.animationDirections.offset.y.next.out||t.animationDirections.offset.x.next.out)/-2,autoAlpha:0,ease:t.ease},"0"),d.length&&t.timeline.set(d,{y:(t.animationDirections.offset.y.next.in||t.animationDirections.offset.x.next.in)/2,autoAlpha:0,ease:t.ease},"0"),t.timeline.addLabel("elementsSet"),a.length&&t.timeline.animateChars(a,{duration:t.speed,stagger:window.rhye.functions.distributeByPosition({amount:t.staggerHeadings,from:i.in.from}),ease:t.ease},"elementsSet-="+this.speed/2),o.length&&t.timeline.animateChars(o,{duration:t.speed,stagger:window.rhye.functions.distributeByPosition({amount:t.staggerHeadings,from:i.in.from}),ease:t.ease},"elementsSet-="+this.speed/2),h.length&&t.timeline.animateLines(h,{duration:t.speed,autoAlpha:1,stagger:window.rhye.functions.distributeByPosition({amount:t.staggerTexts,from:"next"===e?"start":"end"}),ease:t.ease},"elementsSet-="+this.speed/2),d.length&&t.timeline.to(d,{duration:t.speed,y:0,autoAlpha:1,ease:t.ease},"elementsSet-="+this.speed/2),this.timeline.totalDuration(1.5*this.speed)}_getSlideAnimationDirections({direction:e="next"}){const t={in:{x:0,y:0,from:"start"},out:{x:0,y:0,from:"start"}};return"next"===e&&(t.in.x=this.animationDirections.offset.x.next.in,t.in.y=this.animationDirections.offset.y.next.in,t.in.from=this.animationDirections.from.next.in,t.out.x=this.animationDirections.offset.x.next.out,t.out.y=this.animationDirections.offset.y.next.out,t.out.from=this.animationDirections.from.next.out),"prev"===e&&(t.in.x=this.animationDirections.offset.x.prev.in,t.in.y=this.animationDirections.offset.y.prev.in,t.in.from=this.animationDirections.from.prev.in,t.out.x=this.animationDirections.offset.x.prev.out,t.out.y=this.animationDirections.offset.y.prev.out,t.out.from=this.animationDirections.from.prev.out),t}_getAnimationDirections(){const e={offset:{x:{next:{in:0,out:0},prev:{in:0,out:0}},y:{next:{in:0,out:0},prev:{in:0,out:0}}},from:{next:{in:"start",out:"start"},prev:{in:"end",out:"end"}}};switch(this.$heading?this.$heading.css("text-align"):"left"){case"left":"horizontal"===this.direction&&(e.offset.x.next.in=this.offset,e.offset.x.next.out=-this.offset,e.offset.x.prev.in=-this.offset,e.offset.x.prev.out=this.offset,e.from.next.in="start",e.from.next.out="start",e.from.prev.in="end",e.from.prev.out="end"),"vertical"===this.direction&&(e.offset.y.next.in=this.offset,e.offset.y.next.out=-this.offset,e.offset.y.prev.in=-this.offset,e.offset.y.prev.out=this.offset,e.from.next.in="end",e.from.next.out="start",e.from.prev.in="start",e.from.prev.out="end");break;case"center":"horizontal"===this.direction&&(e.offset.x.next.in=-this.offset,e.offset.x.next.out=this.offset,e.offset.x.prev.in=this.offset,e.offset.x.prev.out=-this.offset,e.from.next.in="end",e.from.next.out="end",e.from.prev.in="start",e.from.prev.out="start"),"vertical"===this.direction&&(e.offset.y.next.in=this.offset,e.offset.y.next.out=-this.offset,e.offset.y.prev.in=-this.offset,e.offset.y.prev.out=this.offset,e.from.next.in="center",e.from.next.out="center",e.from.prev.in="center",e.from.prev.out="center");break;case"right":"horizontal"===this.direction&&(e.offset.x.next.in=-this.offset,e.offset.x.next.out=this.offset,e.offset.x.prev.in=this.offset,e.offset.x.prev.out=-this.offset,e.from.next.in="end",e.from.next.out="end",e.from.prev.in="start",e.from.prev.out="start"),"vertical"===this.direction&&(e.offset.y.next.in=-this.offset,e.offset.y.next.out=this.offset,e.offset.y.prev.in=this.offset,e.offset.y.prev.out=-this.offset,e.from.next.in="start",e.from.next.out="end",e.from.prev.in="end",e.from.prev.out="start")}return e}}}(jQuery);