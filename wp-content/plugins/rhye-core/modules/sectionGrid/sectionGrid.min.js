!function(e){"use strict";window.rhye.components.Filter=class{constructor({scope:t,target:i}){this.$target=i,this.$scope=t,this.itemClass=".js-filter__item",this.itemActive="filter__item_active",this.itemActiveClass=".filter__item_active",this.underlineClass=".js-filter__underline",this.$items=this.$target.find(this.itemClass),this.$line=this.$target.find(e(this.underlineClass)),this.bindEvents()}bindEvents(){const t=this;this.$scope.on("mouseenter",this.itemClass,(function(){t.updateLinePosition(e(this))})).on("mouseleave",this.itemClass,(function(){t.updateLinePosition(t.$items.filter(t.itemActiveClass))})).on("click",this.itemClass,(function(){const i=e(this);t.$items.removeClass(t.itemActive),i.addClass(t.itemActive),t.updateLinePosition(i)})),window.$window.on("resize",window.rhye.functions.debounce((()=>{setTimeout((()=>{t.updateLinePosition(t.$items.filter(t.itemActiveClass))}),750),t.updateLinePosition(t.$items.filter(t.itemActiveClass))}),250))}updateLinePosition(e,t=.5){if(!this.$line.length)return!1;if(e&&e.length){const i=e.find(".filter__item-inner"),s=this.$target.offset(),n=i.innerWidth(),a=i.position(),r=i.offset(),o=e.position();gsap.to(this.$line,{duration:t,ease:"expo.inOut",width:n,top:r.top-s.top,x:a.left+o.left})}else gsap.to(this.$line,{duration:.6,width:0,ease:"expo.out"})}setActiveItem(e,t=.5){const i=this.$items.eq(e);if(!i.length)return!1;this.$items.removeClass(this.itemActive),i.addClass(this.itemActive),this.updateLinePosition(i,t)}},window.rhye.components.Grid=class extends window.rhye.components.Base{constructor({target:e,scope:t}){super({target:e,scope:t}),this.isotopeInstance=this.$el.isotope({itemSelector:".js-grid__item",columnWidth:".js-grid__sizer",percentPosition:!0,horizontalOrder:!0}),this.lazyImages=new window.rhye.components.LazyLoad({images:this.$el.find("img[data-src]")}),this._layoutImages(),setTimeout((()=>{this.isotopeInstance.isotope("layout")}),600)}_layoutImages(){this.$el.imagesLoaded().progress((e=>{this.isotopeInstance.isotope("layout")})).done((()=>{setTimeout((()=>{this.isotopeInstance.isotope("layout")}),300)}))}},window.rhye.components.SectionGrid=class extends window.rhye.components.ScrollAnimation{constructor({scope:e,target:t}){super({scope:e,target:t})}run(e){this._set(e),this._init(e)}_set(e){this.$items=e.find(".section-grid__item"),this.$filter=e.find(".js-filter"),this.$filterAjax=e.find(".js-grid-ajax__filter"),this.filterAjaxActiveItemIndex=this.$filterAjax.find(".filter__item_active").index(),this.$filterUnderline=this.$filter.find(".filter__underline"),this.$grid=e.find(".js-grid"),this.$gridItems=this.$grid.find(".js-grid__item"),this.$mask=e.find(".mask-reveal"),this.$maskLayer1=e.find(".mask-reveal__layer-1"),this.$maskLayer2=e.find(".mask-reveal__layer-2"),this.$captions=e.find(".figure-image__wrapper-caption"),this.animationScenes=[],this.refresher,this.$pagination=e.find(".pagination"),this.$prev=this.$pagination.find("a.page-numbers.prev"),this.$next=this.$pagination.find("a.page-numbers.next"),this.$pages=this.$pagination.find(".nav-links__container a.page-numbers"),void 0!==window.theme&&void 0!==window.theme.ajaxURL||this._bindPaginationEvents(),this._hasAnimationScene(e)&&(this.$mask.length?(gsap.effects.setMask(this.$mask),gsap.set(this.$captions,{y:30,autoAlpha:0})):gsap.effects.setJump(this.$items),gsap.set(e,{autoAlpha:1})),this.$filterUnderline.hasClass("js-cancel-animation")||gsap.set(this.$filterUnderline,{scaleX:0})}_init(e){const t=new gsap.timeline,i=parseInt(e.data("grid-columns"),10)||1,s=parseInt(e.data("grid-columns-tablet"),10)||1,n=parseInt(e.data("grid-columns-mobile"),10)||1,a=window.elementorFrontend?window.elementorFrontend.config.breakpoints.lg-1:1024,r=window.elementorFrontend?window.elementorFrontend.config.breakpoints.md-1:767;let o=i;if(this._bindGridFilter(),t.to(this.$filterUnderline,{onStart:()=>{void 0!==this.filter&&this.filter.updateLinePosition(this.filter.$items.filter(this.filter.itemActiveClass))},scaleX:1,transformOrigin:"left center",ease:"expo.inOut",duration:.6,delay:.3}),this._hasAnimationScene(e)){window.Modernizr.mq("(max-width: "+a+"px)")&&(o=s),window.Modernizr.mq("(max-width: "+r+"px)")&&(o=n);for(let t=0;t<this.$items.length;t+=o){let i=this.$items.slice(t,t+o),s=new gsap.timeline;this.$mask.length?s.to(i.find(this.$maskLayer1),{y:"0%",duration:.9,ease:"power4.inOut",stagger:.15},"start").to(i.find(this.$maskLayer2),{y:"0%",duration:.9,ease:"power4.inOut",stagger:.15},"start").to(i.find(this.$maskLayer2),{duration:1.35,transformOrigin:"center center",scale:1},"start").to(i.find(this.$captions),{duration:.6,y:0,autoAlpha:1},"-=0.6"):s.animateJump(i,{onUpdate:()=>{if(this.parallax&&this.parallax.scenes)for(let e=0;e<i.length;e++)this.parallax.scenes[e].refresh(!0)},onComplete:()=>{if(this.parallax&&this.parallax.scenes)for(let e=0;e<i.length;e++)this.parallax.scenes[e].refresh(!0)},stagger:.15},"start"),this.animationScenes.push(this._createScene({element:0===t?e:i[0],triggerHook:.9,timeline:s,reveal:!1}))}this._createScene({element:e,timeline:t})}}_updateParallaxScenes({interval:e=50,immediate:t=!1}){this.parallax&&this.parallax.scenes&&(this.refresher=setInterval((()=>{this.parallax.refresh(t)}),e))}_updateAnimationScenes({immediate:e=!1}){this.animationScenes.length&&this.animationScenes.forEach((t=>{t.refresh(e)}))}_bindPaginationEvents(){const e=this;this.$prev.off("click").on("click",(t=>{t.preventDefault(),window.theme.posts.currentPage>1&&(e._setLoading(!0),e._getPostsAjax(parseInt(window.theme.posts.currentPage,10)-1))})),this.$next.off("click").on("click",(t=>{t.preventDefault(),window.theme.posts.currentPage<window.theme.posts.totalPages&&(e._setLoading(!0),e._getPostsAjax(parseInt(window.theme.posts.currentPage,10)+1))})),this.$pages.off("click").on("click",(function(t){t.preventDefault(),e._setLoading(!0),e._getPostsAjax(parseInt(this.textContent,10))}))}_bindGridFilter(){const t=this;this.$grid.length&&(this.filter=this._createFilter(),this.filterAJAX=this._createFilter(),this.grid=this._createGrid(),this.$filter.length&&(this.filter.setActiveItem(0,0),this.filter.$items.on("click",(function(i){const s=e(this),n=s.data("filter"),a=s.is("a");ScrollTrigger.refresh(),t._updateParallaxScenes({interval:60,immediate:!0}),a||("*"===n?t.$grid.removeClass("grid_filtered"):t.$grid.addClass("grid_filtered")),a&&window.theme.ajax.enabled&&i.preventDefault(),t.grid.isotopeInstance.isotope({filter:n})})),this.grid.isotopeInstance.on("arrangeComplete",(()=>{this.lazyImages&&this.lazyImages.lazyImages.update(),clearInterval(t.refresher),t._updateAnimationScenes({immediate:!0})})),this.grid.isotopeInstance.on("layoutComplete",(()=>{ScrollTrigger.refresh()}))),this.$filterAjax.length&&this.filterAJAX.setActiveItem(this.filterAjaxActiveItemIndex,0))}_createFilter(){return new window.rhye.components.Filter({target:this.$filter,scope:this.$scope})}_createGrid(){return new window.rhye.components.Grid({target:this.$grid,scope:this.$scope})}_renderGrid(e){this.$gridItems.remove(),this.$grid.prepend(e).isotope("prepended",e).isotope({filter:"*"})}_renderPagination(e){this.$pagination.replaceWith(e)}_renderFilter(e){this.$filter.replaceWith(e)}_getPostsAjax(t=1){e.ajax({url:window.theme.ajaxURL,data:{action:"get_posts",page:t,totalPages:window.theme.posts.totalPages},type:"POST",success:i=>{const s=e(i),n=s.find(".js-grid__item"),a=s.find(".pagination"),r=s.find(".js-filter");this._renderFilter(r),this._renderPagination(a),this._renderGrid(n),this.set(),new window.rhye.components.SectionGrid({target:this.$el,scope:window.$document}),this._bindEvents(),window.theme.posts.currentPage=parseInt(t)},complete:()=>{this._setLoading(!1)}})}_setLoading(e=!0){!0===e?(window.$barbaWrapper.addClass("cursor-progress"),this.$el.addClass("pointer-events-none").removeAttr("data-arts-os-animation"),window.rhye.components.Scroll.scrollTo({x:0,y:this.$el.offset().top-window.$pageHeader.height(),duration:800})):(this.$el.removeClass("pointer-events-none"),window.$barbaWrapper.removeClass("cursor-progress"))}}}(jQuery);